{% extends '../subpages_base.html' %} {% load custom_filters %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% block title %}
    <title>Reviews | DIY CONNECT</title>
    {% endblock title %}

    <style>
      /* {% block styles %} */
      .sty-bkg-alternate-1 {
        background-color: #283618;
        color: white;
        padding-left: 4px;
        padding-right: 4px;
      }
      .sty-bkg-alternate-2 {
        background-color: white;
        color: black;
      }

      .sty-header-title {
        font-size: 40px;
        font-weight: 600;
      }
      .sty-score-txt {
        font-size: 36px;
        font-weight: 800;
      }
      .sty-fm-hind {
        font-family: "Hind Madurai", sans-serif;
        font-style: normal;
      }

      .sty-fm-montserrat {
        font-family: "Montserrat", sans-serif;
        font-optical-sizing: auto;

        font-style: normal;
      }
      .sty_profile_section {
        height: 150px;
        width: 150px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden; /* Ensures image doesn't spill outside */
        border-radius: 50%; /* Make the container round */
        background: #eee; /* Optional fallback background */
      }

      .sty_profile_section img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Fill the container while keeping aspect ratio */
      }
      .sty-stars {
        font-size: 24px;
        color: gold;
      }
      @media (max-width: 768px) {
        .sty-header-title {
          font-size: 28px; /* Smaller but still bold on mobile */
        }

        .sty-score-txt {
          font-size: 24px;
          text-align: center;
        }

        .sty_profile_section {
          height: 80px;
          width: 80px;
          margin: 0 auto; /* Center in smaller screens */
        }

        .sty-bkg-alternate-1,
        .sty-bkg-alternate-2 {
          padding-left: 8px;
          padding-right: 8px;
          font-size: 14px;
        }

        .sty-fm-hind,
        .sty-fm-montserrat {
          font-size: 14px;
          line-height: 1.4;
        }

        .sty_profile_section {
          height: 60px;
          width: 60px;
        }
        .sty-stars {
          font-size: 10px;
          color: gold;
        }
      }

      /* {% endblock styles %} */
    </style>
  </head>
  <body>
    <!-- prettier-ignore -->
    {% block content %}
    <!-- //prettier-ignore -->
    <div class="container">
      <!-- prettier-ignore -->
      {% if reviews  %}
      <!-- //prettier-ignore -->
      {% for review in reviews %}
      <!-- REVIEW CONTAINER (alternate-1) -->

      <div class="get_bkg_element">
        <div class="columns is-vcentered is-mobile my-4">
          <div class="column has-text-centered">
            <figure class="sty_profile_section">
              <img
                class=""
                src="{{ review.USER_RECIEVE_REQUEST.profile_picture.url }}"
              />
            </figure>
          </div>
          <div class="column is-6">
            <h1 class="sty-sect-opt sty-fm-montserrat sty-header-title">
              {{ review.post_title }}
            </h1>
            <h1 class="sty-fm-hind">{{ review.comment }}</h1>
            <h1 class="has-text-right sty-fm-hind">
              by: {{ review.USER_RECIEVE_REQUEST.username }}
            </h1>
          </div>

          <div class="column is-3">
            <div class="has-text-centered">
              <h1 class="sty-score-txt sty-fm-montserrat">
                {{ review.stars }}
              </h1>
              {% for i in review.stars|times %}
              <ion-icon name="star" class="sty-stars"></ion-icon>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

      {% endfor %}
      <!-- REVIEW CONTAINER (alternate-1) -->
      <!-- REVIEW CONTAINER (alternate-2) -->

      <!--
      <div class="sty-bkg-alternate-2">
        <div class="columns is-vcentered">
          <div class="column has-text-centered is-2">
            <h1>pfp</h1>
          </div>
          <div class="column">
            <h1 class="sty-sect-opt sty-fm-montserrat sty-header-title">
              300 pcs of Plastics Bottles
            </h1>
            <h1 class="sty-fm-hind">
              Thank you for providing exactly what I needed â€” your help made my
              project possible!
            </h1>
            <h1 class="has-text-right sty-fm-hind">by: RecycleKing_92</h1>
          </div>

          <div class="column is-3">
            <div class="has-text-centered">
              <h1 class="sty-score-txt sty-fm-montserrat">4.5</h1>
              <h1>stars</h1>
            </div>
          </div>
        </div>
      </div>
       -->
      <!-- REVIEW CONTAINER (alternate-2) -->

      <!-- prettier-ignore -->
      {% else %}
      <!-- //this part else  -->
      <h1 class="has-text-centered">
        There is no reviwes. User does not fulfill any request yet.
      </h1>
      <!-- //prettier-ignore -->

      <!-- prettier-ignore -->
      {% endif %}
      <!-- //this part endif -->
      <!-- //prettier-ignore -->
    </div>
    <div id="user_details" data-username="{{ user.username }}"></div>
    <div id="get_link" data-url="{% url 'main:diyconn_home' %}" hidden></div>
    <!-- prettier-ignore -->
    {% endblock content %}
    <!-- //prettier-ignore -->
  </body>
  <script>
    //{% block scripts %}
    function Initialized() {
      let get_user_details = document.getElementById("user_details");

      let get_link = document.getElementById("get_link");
      let usr_all_bck_opt_ref = document.querySelectorAll(
        "#usr_all_bck_opt_ref"
      );

      usr_all_bck_opt_ref.forEach((element) => {
        element.href = get_link.getAttribute("data-url");
      });

      let usr_all_bck_opt_label = document.querySelectorAll(
        "#usr_all_bck_opt_label"
      );
      usr_all_bck_opt_label.forEach((element) => {
        element.textContent = `Reviews ${get_user_details.getAttribute(
          "data-username"
        )}`;
      });

      let get_bkg_element = document.querySelectorAll(".get_bkg_element");
      let i = 0;
      get_bkg_element.forEach((element) => {
        if (i % 2 === 0) {
          element.classList.add("sty-bkg-alternate-1");
        } else {
          element.classList.add("sty-bkg-alternate-2");
        }
        i++;
      });
    }
    Initialized();
    //{% endblock scripts %}
  </script>
</html>
